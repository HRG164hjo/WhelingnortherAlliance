<?xml version="1.0" encoding="utf-8" ?>
<Patch>
    <Operation Class="PatchOperationReplace">
	    <xpath>Defs/ThingDef[race/mechEnabledWorkTypes and race/mechFixedSkillLevel]/race/mechFixedSkillLevel</xpath>
        <value>
            <mechFixedSkillLevel>20</mechFixedSkillLevel>
        </value>
        <success>Always</success>
    </Operation>
    
    <Operation Class="PatchOperationAdd">
	    <xpath>Defs/ThingDef[race/mechEnabledWorkTypes and not(race/mechFixedSkillLevel)]/race</xpath>
        <value>
            <mechFixedSkillLevel>20</mechFixedSkillLevel>
        </value>
    </Operation>
    
    <Operation Class="PatchOperationRemove">
	    <xpath>Defs/WorkTypeDef[defName="Mining" or defName="Childcare"]/requireCapableColonist</xpath>
        <success>Always</success>
    </Operation>

    <Operation Class="PatchOperationFindMod">
	    <mods>
            <li>The Dead Man's Switch</li>
	    </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="DMS_Mech_Lady"]/race/mechEnabledWorkTypes</xpath>
                    <value>
                        <li>WNAWork_Rite</li>
                        <li>Crafting</li>
                        <li>Smithing</li>
                    </value>
				</li>
                
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="DMS_LabReactor"]/recipes</xpath>
                    <value>
	                    <li MayRequire="Oblitus.Carbon">Carbon_MakeChemfuelFromHaygrass</li>
	                    <li MayRequire="Oblitus.Carbon">Carbon_MakeCarbonWeave</li>
	                    <li MayRequire="Oblitus.Carbon">Carbon_MakeCarbonFiber</li>
	                    <li MayRequire="Oblitus.Carbon">Carbon_MakeDiamond</li>
                    </value>
				</li>
            </operations>
	    </match>
    </Operation>
    <Operation Class="PatchOperationFindMod">
	    <mods>
            <li>The Dead Man's Switch - Synthetic</li>
	    </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="DMS_Mech_BigSister"]/race/mechEnabledWorkTypes</xpath>
                    <value>
                        <li>Art</li>
                        <li>Smithing</li>
                        <li>Mining</li>
                        <li>Crafting</li>
                    </value>
				</li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="DMS_Mech_Armiman"]/race/mechEnabledWorkTypes</xpath>
                    <value>
                        <li>Hunting</li>
                        <li>Smithing</li>
                        <li>Construction</li>
                    </value>
				</li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="DMS_Mech_Maiden"]/race/mechEnabledWorkTypes</xpath>
                    <value>
                        <li>Childcare</li>
                        <li>WNAWork_Rite</li>
                        <li>Hauling</li>
                    </value>
				</li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="DMS_Mech_Maiden" or defName="DMS_Mech_BigSister" or defName="DMS_Mech_Armiman" or defName="DMS_Mech_Lady"]/modExtensions/li[@Class="Fortified.MechWeaponExtension"]/UsableTechLevels</xpath>
                    <value>
                        <li>Archotech</li>
                    </value>
				</li>
            </operations>
	    </match>
    </Operation>
    
</Patch>